# File: Dockerfile-alpine
FROM debian:bullseye-slim

# Install basic tools
RUN apt-get update && apt-get install -y \
    bash \
    python3 \
    python3-pip \
    passwd \
    && rm -rf /var/lib/apt/lists/*

# Install Python crypt module
RUN pip3 install --no-cache-dir passlib

# Create attacker user
RUN useradd -m attacker && \
    echo "attacker:attacker" | chpasswd

# Dangerous permissions - make files world writable
RUN chmod 666 /etc/passwd && chmod 666 /etc/shadow

USER attacker
WORKDIR /home/attacker

COPY passwd_alpine.py .

CMD ["/bin/bash"] 